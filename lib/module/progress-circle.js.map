{"version":3,"sources":["progress-circle.js"],"names":["React","PureComponent","View","PropTypes","shape","Path","Svg","G","ProgressCircle","height","width","_onLayout","event","nativeEvent","layout","setState","render","style","progressColor","backgroundColor","strokeWidth","startAngle","endAngle","animate","animateDuration","children","cornerRadius","props","progress","state","outerDiameter","Math","min","isFinite","isNaN","data","key","value","color","pieSlices","pie","d","sort","a","arcs","map","slice","index","path","arc","outerRadius","innerRadius","extraProps","Children","child","belowChart","cloneElement","propTypes","number","isRequired","any","bool","defaultProps","PI"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport * as shape from 'd3-shape'\r\nimport Path from './animated-path'\r\nimport Svg, { G } from 'react-native-svg'\r\n\r\nclass ProgressCircle extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            style,\r\n            progressColor,\r\n            backgroundColor,\r\n            strokeWidth,\r\n            startAngle,\r\n            endAngle,\r\n            animate,\r\n            animateDuration,\r\n            children,\r\n            cornerRadius,\r\n        } = this.props\r\n\r\n        let { progress } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        const outerDiameter = Math.min(width, height)\r\n\r\n        if (!isFinite(progress) || isNaN(progress)) {\r\n            progress = 0\r\n        }\r\n\r\n        // important order to have progress render over \"rest\"\r\n        const data = [\r\n            {\r\n                key: 'rest',\r\n                value: 1 - progress,\r\n                color: backgroundColor,\r\n            },\r\n            {\r\n                key: 'progress',\r\n                value: progress,\r\n                color: progressColor,\r\n            },\r\n        ]\r\n\r\n        const pieSlices = shape\r\n            .pie()\r\n            .value((d) => d.value)\r\n            .sort((a) => (a.key === 'rest' ? 1 : -1))\r\n            .startAngle(startAngle)\r\n            .endAngle(endAngle)(data)\r\n\r\n        const arcs = pieSlices.map((slice, index) => ({\r\n            ...data[index],\r\n            ...slice,\r\n            path: shape\r\n                .arc()\r\n                .outerRadius(outerDiameter / 2) // Radius of the pie\r\n                .innerRadius(outerDiameter / 2 - strokeWidth) // Inner radius: to create a donut or pie\r\n                .startAngle(index === 0 ? startAngle : slice.startAngle)\r\n                .endAngle(index === 0 ? endAngle : slice.endAngle)\r\n                .cornerRadius(cornerRadius)(),\r\n        }))\r\n\r\n        const extraProps = {\r\n            width,\r\n            height,\r\n        }\r\n\r\n        return (\r\n            <View style={style} onLayout={(event) => this._onLayout(event)}>\r\n                {height > 0 && width > 0 && (\r\n                    <Svg style={{ height, width }}>\r\n                        {/* center the progress circle*/}\r\n                        <G x={width / 2} y={height / 2}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {arcs.map((shape, index) => {\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        fill={shape.color}\r\n                                        d={shape.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animateDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </G>\r\n                    </Svg>\r\n                )}\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nProgressCircle.propTypes = {\r\n    progress: PropTypes.number.isRequired,\r\n    style: PropTypes.any,\r\n    progressColor: PropTypes.any,\r\n    backgroundColor: PropTypes.any,\r\n    strokeWidth: PropTypes.number,\r\n    startAngle: PropTypes.number,\r\n    endAngle: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    cornerRadius: PropTypes.number,\r\n    animateDuration: PropTypes.number,\r\n}\r\n\r\nProgressCircle.defaultProps = {\r\n    progressColor: 'black',\r\n    backgroundColor: '#ECECEC',\r\n    strokeWidth: 5,\r\n    startAngle: 0,\r\n    endAngle: Math.PI * 2,\r\n    cornerRadius: 45,\r\n}\r\n\r\nexport default ProgressCircle\r\n"]}