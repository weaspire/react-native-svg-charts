{"version":3,"sources":["stacked-bar-grouped.js"],"names":["React","PureComponent","View","PropTypes","Svg","array","scale","shape","Path","StackedBarGrouped","width","height","x0","y0","x1","y1","borderRadius","showTopBorder","showBottomBorder","commands","push","marker","values","topLeft1","topLeft2","bottomLeft1","bottomLeft2","bottomRight1","bottomRight2","topRight1","topRight2","map","command","join","trim","_onLayout","event","nativeEvent","layout","setState","calcXScale","domain","horizontal","contentInset","left","right","spacingInner","spacingOuter","props","state","scaleLinear","range","scaleBand","paddingInner","paddingOuter","calcYScale","top","bottom","calcAreas","x","y","series","colors","keys","data","initialBorderRadius","innerBarSpace","areas","barWidth","bandwidth","length","stack","stackIndex","serie","keyIndex","entry","entryIndex","leftMargin","path","area","d","_index","defined","isNaN","color","key","barHeight","coordinatesToPathCommands","commandsToSvgPath","merge","calcExtent","gridMax","gridMin","mergedValues","extent","calcIndexes","_","index","getSeries","offset","order","valueAccessor","obj","value","item","render","animate","animationDuration","style","numberOfTicks","children","indexes","ticks","xDomain","yDomain","stacks","extraProps","flex","Children","child","belowChart","cloneElement","indexStack","areaIndex","bar","indexArea","svg","propTypes","arrayOf","object","string","isRequired","func","any","number","bool","defaultProps","stackOffsetNone","stackOrderNone","showZeroAxis","showGrid"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport Svg from 'react-native-svg'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport Path from '../animated-path'\r\n\r\nclass StackedBarGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys, data, borderRadius: initialBorderRadius, innerBarSpace } = this.props\r\n        let areas\r\n        let barWidth\r\n\r\n        if (horizontal) {\r\n            barWidth = y.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y(\r\n                                (d, _index) =>\r\n                                    (_index === 0\r\n                                        ? y(entryIndex) + barWidth * stackIndex + leftMargin\r\n                                        : y(entryIndex) + barWidth + barWidth * stackIndex) - leftMargin\r\n                            )\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            barWidth = x.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n                        const x0 = x(entryIndex) + barWidth * stackIndex + leftMargin\r\n                        const x1 = x(entryIndex) + barWidth + barWidth * stackIndex - leftMargin\r\n                        const y0 = y(entry[1])\r\n                        const y1 = y(entry[0])\r\n                        const barHeight = y1 - y0\r\n                        const borderRadius = initialBorderRadius * 2 > barHeight ? barHeight / 2 : initialBorderRadius\r\n                        const showTopBorder = keyIndex === stack.length - 1\r\n                        const showBottomBorder = keyIndex === 0\r\n                        const commands = this.coordinatesToPathCommands(\r\n                            x0,\r\n                            y0,\r\n                            x1,\r\n                            y1,\r\n                            borderRadius,\r\n                            showTopBorder,\r\n                            showBottomBorder\r\n                        )\r\n\r\n                        return {\r\n                            path: this.commandsToSvgPath(commands),\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return array.merge(areas)\r\n    }\r\n\r\n    coordinatesToPathCommands = (x0, y0, x1, y1, borderRadius, showTopBorder, showBottomBorder) => {\r\n        const commands = []\r\n        commands.push({ marker: 'M', values: [x0, y0] })\r\n\r\n        if (showTopBorder) {\r\n            const topLeft1 = [x0 + borderRadius, y0]\r\n            const topLeft2 = [x0, y0 + borderRadius]\r\n            commands.push({ marker: 'L', values: topLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topLeft1, x0, y0, ...topLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: topLeft2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y0] })\r\n        }\r\n\r\n        if (showBottomBorder) {\r\n            const bottomLeft1 = [x0, y1 - borderRadius]\r\n            const bottomLeft2 = [x0 + borderRadius, y1]\r\n            commands.push({ marker: 'L', values: bottomLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomLeft1, x0, y1, ...bottomLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomLeft2 })\r\n            const bottomRight1 = [x1 - borderRadius, y1]\r\n            const bottomRight2 = [x1, y1 - borderRadius]\r\n            commands.push({ marker: 'L', values: bottomRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomRight1, x1, y1, ...bottomRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y1] })\r\n            commands.push({ marker: 'L', values: [x1, y1] })\r\n        }\r\n\r\n        if (showTopBorder) {\r\n            const topRight1 = [x1, y0 + borderRadius]\r\n            const topRight2 = [x1 - borderRadius, y0]\r\n\r\n            commands.push({ marker: 'L', values: topRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topRight1, x1, y0, ...topRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: topRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x1, y0] })\r\n        }\r\n\r\n        commands.push({ marker: 'Z', values: [] })\r\n\r\n        return commands\r\n    }\r\n\r\n    commandsToSvgPath = (commands) =>\r\n        commands\r\n            .map((command) => `${command.marker} ${command.values.join(',')}`)\r\n            .join(' ')\r\n            .trim()\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        // One more merge for stacked groups\r\n        const mergedValues = array.merge(values)\r\n\r\n        return array.extent([...mergedValues, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n\r\n        // Must return an array with indexes for the number of groups to be shown\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return data.map((obj, index) =>\r\n            shape\r\n                .stack()\r\n                .keys(keys[index])\r\n                .value((item, key) => valueAccessor({ item, key }))\r\n                .order(order)\r\n                .offset(offset)(obj.data)\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const stacks = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {stacks.map((areas, indexStack) => {\r\n                                const areaIndex = indexStack % data.length\r\n\r\n                                return areas.map((bar, indexArea) => {\r\n                                    const keyIndex = indexArea % data[areaIndex].data.length\r\n                                    const key = `${areaIndex}-${keyIndex}-${bar.key}`\r\n\r\n                                    const { svg } = data[areaIndex].data[keyIndex][bar.key]\r\n\r\n                                    return (\r\n                                        <Path\r\n                                            key={key}\r\n                                            fill={bar.color}\r\n                                            {...svg}\r\n                                            d={bar.path}\r\n                                            animate={animate}\r\n                                            animationDuration={animationDuration}\r\n                                        />\r\n                                    )\r\n                                })\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nStackedBarGrouped.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n    borderRadius: PropTypes.number,\r\n    innerBarSpace: PropTypes.number,\r\n}\r\n\r\nStackedBarGrouped.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n    borderRadius: 0,\r\n    innerBarSpace: 0,\r\n}\r\n\r\nexport default StackedBarGrouped\r\n"]}